<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <title>Treino avan√ßado ‚Äì Avalia√ß√£o Inicial</title>
  <style>
    :root{--green:#29ff47;--bg:#0a0a0a;--panel:#111;--muted:#9a9a9a;--danger:#ff4d4d;}
    html,body{margin:0;padding:0;background:var(--bg);color:#eaeaea;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,'Helvetica Neue',Arial;}
    .wrap{max-width:860px;margin:0 auto;padding:16px;}
    .card{background:var(--panel);border:1px solid #1e1e1e;border-radius:16px;padding:16px;box-shadow:0 8px 28px rgba(0,0,0,.35);}
    .logo{display:flex;align-items:center;justify-content:center;margin:8px 0 16px;}
    .logo img{max-width:260px;height:auto;filter:drop-shadow(0 4px 16px rgba(41,255,71,.25));}
    h1{margin:8px 0 8px;font-size:1.35rem;color:var(--green);text-align:center;letter-spacing:.5px}
    .subtitle{margin:0 0 10px;text-align:center;color:#c9c9c9;font-size:.95rem}
    .section{margin:18px 0;padding:14px;border:1px solid #1e1e1e;border-radius:14px;background:#0e0e0e}
    .section-title{margin:0 0 6px;color:#fff;font-weight:700;font-size:1rem;background:linear-gradient(90deg, rgba(41,255,71,.15), transparent);padding:8px 10px;border-radius:10px}
    label.q{display:block;color:#fff;font-weight:600;margin:12px 0 6px}
    .hint{color:#9a9a9a;font-size:.88rem;margin:-2px 0 8px}
    input[type=text], input[type=number], textarea, select{
      width:100%;padding:12px 14px;border-radius:12px;border:1px solid #1e1e1e;background:#141414;color:#eee;
      outline:none;transition:.2s;
    }
    textarea{min-height:84px;resize:vertical}
    input:focus, textarea:focus, select:focus{border-color:var(--green);box-shadow:0 0 0 3px rgba(41,255,71,.12)}
    .arrow{display:flex;align-items:center;gap:8px;color:#29ff47;opacity:.9;margin:8px 0 0;font-size:.95rem}
    .arrow::after{content:'‚û°Ô∏è';margin-left:auto}
    .row{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    @media (max-width:560px){.row{grid-template-columns:1fr} .logo img{max-width:200px}}
    .btn{margin-top:12px;width:100%;background:var(--green);color:#091109;border:none;border-radius:14px;padding:14px 16px;font-weight:800;font-size:1.05rem;box-shadow:0 10px 30px rgba(41,255,71,.22);cursor:pointer;}
    .btn:active{transform:translateY(1px)}
    .btn-alt{margin-top:10px;width:100%;background:#222;color:#eee;border:1px solid #333;border-radius:14px;padding:12px 14px;font-weight:700;cursor:pointer;}
    .error{color:#ff4d4d;font-size:.9rem;margin-top:6px;display:none}
    .success{display:none;color:#b6f5c1;background:#0f1f12;border:1px solid #203b21;padding:10px;border-radius:10px;margin-top:10px}
    .copy{margin-top:10px;text-align:center}
    .divider{height:1px;background:#1e1e1e;margin:10px 0}
    .radio-grid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:10px}
    @media (max-width:480px){.radio-grid{grid-template-columns:1fr}}
    .rbx{display:flex;align-items:center;gap:10px;padding:10px;border:1px solid #1e1e1f;border-radius:12px;background:#141414}
  </style>
</head>
<body>
  <div class="wrap">
    
    


<div class="logo">
      <img src="data:image/svg+xml;utf8,
        <svg xmlns='http://www.w3.org/2000/svg' width='720' height='220' viewBox='0 0 720 220'>
          <rect width='100%' height='100%' fill='black'/>
          <g fill='%2329ff47'>
            <text x='50%' y='50%' dominant-baseline='middle' text-anchor='middle' font-size='40' font-family='Arial' font-weight='700'>TREINO PERSONALIZADO</text>
            <text x='50%' y='78%' dominant-baseline='middle' text-anchor='middle' font-size='18' font-family='Arial'>MFit Personal ‚Äì Avan√ßado</text>
          </g>
        </svg>" alt="Treino Personalizado ‚Äì Avan√ßado"/>
    </div>
    <h1>Treino avan√ßado ‚Äì Avalia√ß√£o Inicial</h1>
    <p class="subtitle">Preencha com aten√ß√£o suas informa√ß√µes para que o Personal elabore seu treino de forma personalizada.</p>

    <form id="mfitForm" class="card" onsubmit="return false;">
      <!-- Se√ß√£o 1 ‚Äì Dados Pessoais -->
      <div class="section">
        <div class="section-title">Se√ß√£o 1 ‚Äì Dados Pessoais</div>
        <label class="q" for="nome">1. Nome completo</label>
        <div class="hint">(resposta curta)</div>
        <input id="nome" name="nome" type="text" placeholder="Ex.: Ana Souza" required>
        <div class="arrow">Pr√≥xima pergunta</div>

        <div class="row">
          <div>
            <label class="q" for="idade">2. Idade</label>
            <input id="idade" name="idade" type="number" inputmode="numeric" min="0" max="120" placeholder="Ex.: 28">
          </div>
          <div>
            <label class="q" for="altura">3. Altura</label>
            <input id="altura" name="altura" type="text" placeholder="Ex.: 1,70 m">
          </div>
        </div>

        <div class="row">
          <div>
            <label class="q" for="peso">4. Peso</label>
            <input id="peso" name="peso" type="text" placeholder="Ex.: 72 kg">
          </div>
          <div>
            <label class="q" for="zap">5. WhatsApp</label>
            <input id="zap" name="zap" type="text" inputmode="tel" placeholder="Ex.: (69) 99291-3628">
          </div>
        </div>
      </div>

      <!-- Se√ß√£o 2 ‚Äì Objetivo -->
      <div class="section">
        <div class="section-title">Se√ß√£o 2 ‚Äì Objetivo</div>
        <label class="q" for="objetivo">1. Qual √© o seu principal objetivo?</label>
        <div class="hint">(m√∫ltipla escolha ‚Äì escolha 1)</div>
        <select id="objetivo" name="objetivo">
          <option value="" selected>Selecione...</option>
          <option>Ganhar massa muscular</option>
          <option>Perder peso / gordura</option>
          <option>Melhorar sa√∫de e disposi√ß√£o</option>
          <option>Condicionamento f√≠sico</option>
          <option>Outro (especifique abaixo)</option>
        </select>
        <textarea id="objetivoOutro" name="objetivoOutro" placeholder="Se marcou 'Outro', descreva aqui"></textarea>
        <div class="arrow">Pr√≥xima pergunta</div>
      </div>

      <!-- Se√ß√£o 3 ‚Äì Experi√™ncia e Frequ√™ncia -->
      <div class="section">
        <div class="section-title">Se√ß√£o 3 ‚Äì Experi√™ncia e Frequ√™ncia</div>
        <label class="q" for="experiencia">1. Qual √© o seu n√≠vel de experi√™ncia com treino?</label>
        <div class="hint">(m√∫ltipla escolha ‚Äì escolha 1)</div>
        <select id="experiencia" name="experiencia">
          <option value="" selected>Selecione...</option>
          <option>Iniciante (nunca treinei)</option>
          <option>Intermedi√°rio (menos de 6 meses de treino)</option>
          <option>Avan√ßado (mais de 6 meses de treino)</option>
        </select>

        <label class="q">2. Quantos dias por semana voc√™ pode treinar?</label>
        <div class="hint">(escolha apenas 1)</div>
        <div class="radio-grid">
          <label class="rbx"><input type="radio" name="dias" value="3 dias/semana"> 3 dias/semana</label>
          <label class="rbx"><input type="radio" name="dias" value="4 dias/semana"> 4 dias/semana</label>
          <label class="rbx"><input type="radio" name="dias" value="5 dias/semana"> 5 dias/semana</label>
          <label class="rbx"><input type="radio" name="dias" value="6 dias/semana"> 6 dias/semana</label>
        </div>

        <label class="q" for="tempo">3. Quanto tempo por treino?</label>
        <input id="tempo" name="tempo" type="text" placeholder="Ex.: 50‚Äì60 min">

        <div class="arrow">Pr√≥xima pergunta</div>
      </div>

      <!-- Se√ß√£o 4 ‚Äì Local de Treino e Equipamentos -->
      <div class="section">
        <div class="section-title">Se√ß√£o 4 ‚Äì Local de Treino e Equipamentos</div>
        <label class="q" for="local">1. Onde voc√™ costuma treinar?</label>
        <div class="hint">(m√∫ltipla escolha ‚Äì escolha 1)</div>
        <select id="local" name="local">
          <option value="" selected>Selecione...</option>
          <option>Academia</option>
          <option>Casa com equipamentos</option>
          <option>Casa sem equipamentos</option>
        </select>

        <div class="section" style="margin-top:12px">
          <div class="section-title">Prefer√™ncia de Equipamentos</div>
          <div class="radio-grid">
            <label class="rbx"><input type="radio" name="equipamento" value="Treinos livres"> Treinos livres</label>
            <label class="rbx"><input type="radio" name="equipamento" value="M√°quinas"> M√°quinas</label>
            <label class="rbx"><input type="radio" name="equipamento" value="Ambos equilibrado"> Ambos equilibrado</label>
          </div>
        </div>

        <div class="arrow">Pr√≥xima pergunta</div>
      </div>

      <!-- Se√ß√£o 5 ‚Äì Hist√≥rico de Sa√∫de -->
      <div class="section">
        <div class="section-title">Se√ß√£o 5 ‚Äì Hist√≥rico de Sa√∫de</div>
        <label class="q" for="cardiaco">Voc√™ possui problemas card√≠acos?</label>
        <select id="cardiaco" name="cardiaco">
          <option value="" selected>Selecione...</option>
          <option>Sim</option>
          <option>N√£o</option>
          <option>N√£o sei</option>
        </select>
        <textarea id="cardiacoDesc" name="cardiacoDesc" placeholder="Se sim, descreva"></textarea>

        <label class="q" for="respiratorio">Voc√™ possui problemas respirat√≥rios (ex.: asma, bronquite)?</label>
        <select id="respiratorio" name="respiratorio">
          <option value="" selected>Selecione...</option>
          <option>Sim</option>
          <option>N√£o</option>
          <option>N√£o sei</option>
        </select>
        <textarea id="respiratorioDesc" name="respiratorioDesc" placeholder="Se sim, descreva"></textarea>

        <div class="row">
          <div>
            <label class="q" for="pressao">Problemas de press√£o arterial?</label>
            <select id="pressao" name="pressao">
              <option value="" selected>Selecione...</option>
              <option>Hipertens√£o</option>
              <option>Hipotens√£o</option>
              <option>Normal</option>
              <option>N√£o sei</option>
            </select>
          </div>
          <div>
            <label class="q" for="medicacao">Uso de medicamentos cont√≠nuos?</label>
            <input id="medicacao" name="medicacao" type="text" placeholder="Quais?">
          </div>
        </div>

        <label class="q" for="cirurgia">J√° realizou cirurgias ou possui doen√ßas cr√¥nicas?</label>
        <textarea id="cirurgia" name="cirurgia" placeholder="Descreva"></textarea>

        <div class="divider"></div>
        <label class="q" for="cesarea">Voc√™ j√° realizou parto cesariano (ces√°rea)?</label>
        <select id="cesarea" name="cesarea">
          <option value="" selected>Selecione...</option>
          <option>Sim</option>
          <option>N√£o</option>
          <option>N√£o se aplica</option>
        </select>
        <div id="cesareaBox" style="display:none">
          <label class="q" for="cesareaTempo">Se sim, h√° quanto tempo foi realizada?</label>
          <input id="cesareaTempo" name="cesareaTempo" type="text" placeholder="Ex.: 8 meses, 2 anos">
          <label class="q" for="cesareaInter">Houve alguma intercorr√™ncia na recupera√ß√£o?</label>
          <textarea id="cesareaInter" name="cesareaInter" placeholder="Descreva (ex.: dor, ader√™ncia, di√°stase, etc.)"></textarea>
        </div>
        <div class="arrow">Pr√≥xima pergunta</div>
      </div>

      <!-- Se√ß√£o 6 ‚Äì Tipo de Metabolismo -->
      <div class="section" id="secMetabolismo">
        <div class="section-title">üß¨ Se√ß√£o 6 ‚Äì Tipo de Metabolismo</div>
        <p class="hint">Responda rapidamente para identificarmos seu tipo metab√≥lico:</p>

        <label class="q" for="met1">1. Voc√™ ganha peso com facilidade ou dificuldade?</label>
        <select id="met1" name="met1">
          <option value="" selected>Selecione...</option>
          <option>Com facilidade</option>
          <option>Com dificuldade</option>
          <option>Normal</option>
        </select>

        <label class="q" for="met2">2. Seu corpo tende a ser mais magro, m√©dio ou largo?</label>
        <select id="met2" name="met2">
          <option value="" selected>Selecione...</option>
          <option>Mais magro</option>
          <option>M√©dio</option>
          <option>Mais largo</option>
        </select>

        <label class="q" for="met3">3. Tem facilidade para perder peso?</label>
        <select id="met3" name="met3">
          <option value="" selected>Selecione...</option>
          <option>Sim</option>
          <option>N√£o</option>
          <option>Mais ou menos</option>
        </select>

        <label class="q" for="met4">4. Como √© seu apetite?</label>
        <select id="met4" name="met4">
          <option value="" selected>Selecione...</option>
          <option>Baixo</option>
          <option>Moderado</option>
          <option>Alto</option>
        </select>

        <label class="q" for="met5">5. Como √© sua energia ao longo do dia?</label>
        <select id="met5" name="met5">
          <option value="" selected>Selecione...</option>
          <option>Alta o tempo todo</option>
          <option>Regular</option>
          <option>Baixa com frequ√™ncia</option>
        </select>

        <p style="margin-top:12px;color:#9a9a9a;font-size:.9rem;">
          ‚û§ <strong>Resultado autom√°tico:</strong> Seu metabolismo √© 
          <span id="metResultado" style="color:#29ff47;font-weight:600;">‚Äî</span>.
        </p>
      </div>

      <!-- Se√ß√£o 7 ‚Äì Mobilidade e Alongamento -->
      <div class="section">
        <div class="section-title">Se√ß√£o 7 ‚Äì Mobilidade e Alongamento</div>
        <label class="q">Deseja incluir <strong>mobilidade</strong> no seu treino?</label>
        <div class="radio-grid">
          <label class="rbx"><input type="radio" name="mobilidade" value="Sim"> Sim</label>
          <label class="rbx"><input type="radio" name="mobilidade" value="N√£o"> N√£o</label>
        </div>

        <label class="q">Deseja incluir <strong>alongamento</strong> no seu treino?</label>
        <div class="radio-grid">
          <label class="rbx"><input type="radio" name="alongamento" value="Sim"> Sim</label>
          <label class="rbx"><input type="radio" name="alongamento" value="N√£o"> N√£o</label>
        </div>
      </div>

      <!-- Se√ß√£o 8 ‚Äì Foco Muscular (escolha √∫nica) -->
      <div class="section">
        <div class="section-title">Se√ß√£o 8 ‚Äì Foco Muscular (escolha √∫nica)</div>
        <div class="hint">Selecione apenas uma op√ß√£o.</div>
        <div class="radio-grid">
          <label class="rbx"><input type="radio" name="foco" value="Costa"> Costa</label>
          <label class="rbx"><input type="radio" name="foco" value="Peito"> Peito</label>
          <label class="rbx"><input type="radio" name="foco" value="Ombro"> Ombro</label>
          <label class="rbx"><input type="radio" name="foco" value="Bra√ßo"> Bra√ßo</label>
          <label class="rbx"><input type="radio" name="foco" value="Abd√¥men"> Abd√¥men</label>
          <label class="rbx"><input type="radio" name="foco" value="Perna completa"> Perna completa</label>
          <label class="rbx"><input type="radio" name="foco" value="Treino equilibrado"> Treino equilibrado</label>
        </div>
      </div>

      <!-- Se√ß√£o 9 ‚Äì Condi√ß√µes F√≠sicas e Limita√ß√µes -->
      <div class="section">
        <div class="section-title">Se√ß√£o 9 ‚Äì Condi√ß√µes F√≠sicas e Limita√ß√µes</div>
        <label class="q" for="temLesao">Voc√™ possui alguma dor, les√£o ou limita√ß√£o f√≠sica?</label>
        <select id="temLesao" name="temLesao">
          <option value="" selected>Selecione...</option>
          <option>Sim</option>
          <option>N√£o</option>
          <option>√Äs vezes</option>
        </select>

        <label class="q" for="ondeLesao">Onde √© a limita√ß√£o ou dor?</label>
        <input id="ondeLesao" name="ondeLesao" type="text" placeholder="Ex.: joelho, ombro, coluna, tornozelo etc.">

        <label class="q" for="movimentoDor">Algum movimento ou exerc√≠cio causa desconforto?</label>
        <textarea id="movimentoDor" name="movimentoDor" placeholder="Descreva o movimento/exerc√≠cio que incomoda"></textarea>
      </div>

      <!-- Se√ß√£o 10 ‚Äì Observa√ß√µes Finais -->
      <div class="section">
        <div class="section-title">Se√ß√£o 10 ‚Äì Observa√ß√µes Finais</div>
        <label class="q" for="obs">Deseja adicionar alguma observa√ß√£o ou prefer√™ncia?</label>
        <textarea id="obs" name="obs" placeholder="Prefer√™ncias de treino, hor√°rios, restri√ß√µes, etc."></textarea>
      </div>

      <!-- A√ß√µes -->
      <button id="copyAllBtn" class="btn-alt" type="button">üìã Copiar minhas respostas</button>
      <button id="sendBtn" class="btn" type="button">üí™ Enviar minhas respostas no WhatsApp</button>
      <div id="err" class="error">Preencha pelo menos o nome e um WhatsApp v√°lido.</div>
      <div id="ok" class="success">Abrindo o WhatsApp... Se n√£o abrir no iPhone, toque e segure e escolha 'Abrir em nova aba'.</div>
    
      <textarea id="copyAllHidden" style="position:absolute;left:-9999px;top:-9999px;height:0;width:0;opacity:0;"></textarea>
    </form>
            
  </div>

  <script>
    const phone = "5569992913628";
    const $ = (id) => document.getElementById(id);
    const normalizePhone = v => (v||"").replace(/\\D+/g,'');

    // Mostrar/ocultar detalhes de ces√°rea
    function toggleCesarea(){
      const cesareaEl = $("cesarea");
      const cesareaBox = $("cesareaBox");
      if(!cesareaEl||!cesareaBox) return;
      cesareaBox.style.display = (cesareaEl.value === "Sim") ? "block" : "none";
    }
    document.addEventListener("change", e=>{ if(e.target && e.target.id==="cesarea") toggleCesarea(); });
    toggleCesarea();

    // Persist√™ncia (inclui foco, equipamentos e limita√ß√µes f√≠sicas)
    const fields = [
      "nome","idade","altura","peso","zap","objetivo","objetivoOutro","experiencia",
      "tempo","local",
      "cardiaco","cardiacoDesc","respiratorio","respiratorioDesc","pressao","medicacao","cirurgia",
      "cesarea","cesareaTempo","cesareaInter",
      "obs","met1","met2","met3","met4","met5",
      "temLesao","ondeLesao","movimentoDor",
      "focoSelecionado","equipSelecionado","diasSelecionado","mobilidade","alongamento"
    ];

    function save(){
      const d={};
      fields.forEach(f=>{
        if(f==="focoSelecionado"){
          const sel = document.querySelector('input[name="foco"]:checked');
          d[f] = sel ? sel.value : "";
          return;
        }
        if(f==="equipSelecionado"){
          const sel = document.querySelector('input[name="equipamento"]:checked');
          d[f] = sel ? sel.value : "";
          return;
        }
        if(f==="diasSelecionado"){
          const sel = document.querySelector('input[name="dias"]:checked');
          d[f] = sel ? sel.value : "";
          return;
        }
        const el=$(f);
        if(!el) return;
        d[f] = el.value;
      });
      // Mobilidade & alongamento (radio)
      d["mobilidade"] = (document.querySelector('input[name="mobilidade"]:checked')||{}).value||"";
      d["alongamento"] = (document.querySelector('input[name="alongamento"]:checked')||{}).value||"";

      localStorage.setItem("mfit_treino_avancado_v7_sem_dieta", JSON.stringify(d));
    }

    function load(){
      try{
        const d=JSON.parse(localStorage.getItem("mfit_treino_avancado_v7_sem_dieta")||"{}");
        fields.forEach(f=>{
          if(f==="focoSelecionado"){
            const val = d[f];
            if(val){
              const radio = Array.from(document.querySelectorAll('input[name="foco"]')).find(r=>r.value===val);
              if(radio) radio.checked = true;
            }
            return;
          }
          if(f==="equipSelecionado"){
            const val = d[f];
            if(val){
              const radio = Array.from(document.querySelectorAll('input[name="equipamento"]')).find(r=>r.value===val);
              if(radio) radio.checked = true;
            }
            return;
          }
          if(f==="diasSelecionado"){
            const val = d[f];
            if(val){
              const radio = Array.from(document.querySelectorAll('input[name="dias"]')).find(r=>r.value===val);
              if(radio) radio.checked = true;
            }
            return;
          }
          const el=$(f);
          if(el && d[f]!==undefined){ el.value = d[f]; }
        });
        // Mobilidade & alongamento
        ["mobilidade","alongamento"].forEach(name=>{
          const val = d[name];
          if(val){
            const r = document.querySelector('input[name="'+name+'"][value="'+val+'"]');
            if(r) r.checked = true;
          }
        });
        if(typeof mfit_classificar_metabolismo==='function') mfit_classificar_metabolismo();
        toggleCesarea();
      }catch(e){}
    }
    load();

    // listeners para salvar autom√°tico
    fields.forEach(f=>{
      if(f==="focoSelecionado"){
        document.querySelectorAll('input[name="foco"]').forEach(r=> r.addEventListener("change", save));
      }else if(f==="equipSelecionado"){
        document.querySelectorAll('input[name="equipamento"]').forEach(r=> r.addEventListener("change", save));
      }else if(f==="diasSelecionado"){
        document.querySelectorAll('input[name="dias"]').forEach(r=> r.addEventListener("change", save));
      }else{
        const el=$(f);
        if(el){ el.addEventListener("input", save); el.addEventListener("change", save); }
      }
    });
    document.querySelectorAll('input[name="mobilidade"],input[name="alongamento"]').forEach(r=>r.addEventListener('change', save));

    function getFoco(){ const sel = document.querySelector('input[name="foco"]:checked'); return sel? sel.value : ""; }
    function getEquip(){ const sel = document.querySelector('input[name="equipamento"]:checked'); return sel? sel.value : ""; }
    function getDias(){ const sel = document.querySelector('input[name="dias"]:checked'); return sel? sel.value : ""; }

    function mfit_classificar_metabolismo(){
      function val(id){ var el=document.getElementById(id); return el?el.value:""; }
      var v1=val("met1"), v2=val("met2"), v3=val("met3"), v4=val("met4"), v5=val("met5");
      var ecto=0, meso=0, endo=0;
      if(v1==="Com dificuldade") ecto++;
      if(v1==="Com facilidade") endo++;
      if(v2==="Mais magro") ecto++;
      if(v2==="M√©dio") meso++;
      if(v2==="Mais largo") endo++;
      if(v3==="Sim") ecto++;
      if(v3==="N√£o") endo++;
      if(v4==="Baixo") ecto++;
      if(v4==="Alto") endo++;
      if(v5==="Alta o tempo todo") ecto++;
      if(v5==="Baixa com frequ√™ncia") endo++;
      var res = "Mesomorfo";
      if(ecto>endo && ecto>meso) res="Ectomorfo";
      if(endo>ecto && endo>meso) res="Endomorfo";
      var span=document.getElementById("metResultado");
      if(span) span.textContent=res;
      return res;
    }
    ["met1","met2","met3","met4","met5"].forEach(id=>{
      var el=document.getElementById(id);
      if(el){ el.addEventListener("change", mfit_classificar_metabolismo); }
    });

    function buildMessage(){
      const objetivoSel = $("objetivo")?.value || "";
      const objetivoOutro = $("objetivoOutro")?.value?.trim() || "";
      const objetivo = (objetivoSel === "Outro (especifique abaixo)" && objetivoOutro) ? objetivoOutro : objetivoSel;

      const data = {
        "Nome": $("nome")?.value?.trim() || "",
        "Idade": $("idade")?.value?.trim() || "",
        "Altura": $("altura")?.value?.trim() || "",
        "Peso": $("peso")?.value?.trim() || "",
        "WhatsApp do aluno": $("zap")?.value?.trim() || "",
        "Objetivo": objetivo,
        "Experi√™ncia": $("experiencia")?.value?.trim() || "",
        "Frequ√™ncia (dias)": getDias(),
        "Tempo por treino": $("tempo")?.value?.trim() || "",
        "Local de treino": $("local")?.value?.trim() || "",

        "Prefer√™ncia de equipamentos": getEquip(),
        "Mobilidade no treino": (document.querySelector('input[name="mobilidade"]:checked')||{}).value||"",
        "Alongamento no treino": (document.querySelector('input[name="alongamento"]:checked')||{}).value||"",

        "Problemas card√≠acos": $("cardiaco")?.value?.trim() || "",
        "Card√≠aco - descri√ß√£o": $("cardiacoDesc")?.value?.trim() || "",
        "Problemas respirat√≥rios": $("respiratorio")?.value?.trim() || "",
        "Respirat√≥rio - descri√ß√£o": $("respiratorioDesc")?.value?.trim() || "",
        "Press√£o arterial": $("pressao")?.value?.trim() || "",
        "Medica√ß√£o cont√≠nua": $("medicacao")?.value?.trim() || "",
        "Cirurgias/doen√ßas cr√¥nicas": $("cirurgia")?.value?.trim() || "",
        "Parto ces√°reo": $("cesarea")?.value?.trim() || "",
        "Ces√°rea - tempo": $("cesareaTempo")?.value?.trim() || "",
        "Ces√°rea - intercorr√™ncias": $("cesareaInter")?.value?.trim() || "",

        "Foco muscular": getFoco(),
        "Observa√ß√µes": $("obs")?.value?.trim() || "",

        "Possui dor/les√£o/limita√ß√£o": $("temLesao")?.value?.trim() || "",
        "Local da dor/limita√ß√£o": $("ondeLesao")?.value?.trim() || "",
        "Movimento que causa desconforto": $("movimentoDor")?.value?.trim() || ""
      };

      const lines = ["Ol√° Personal! Preenchi minha ficha para montar meu TREINO PERSONALIZADO üí™"];
      for(const [k,v] of Object.entries(data)){ if(v) lines.push(`${k}: ${v}`); }
      const metab = mfit_classificar_metabolismo();
      lines.push("Resultado: Seu metabolismo √© " + metab + ".");
      return lines.join("\\n");
    }

    // Bot√£o copiar tudo (sempre vis√≠vel)
    document.getElementById("copyAllBtn").addEventListener("click", async () => {
      const text = buildMessage();
      try{
        await navigator.clipboard.writeText(text);
        alert("Mensagem copiada! Abra onde quiser e cole.");
      }catch(e){
        prompt("Copie manualmente (Ctrl+C/‚åòC):", text);
      }
      save();
    });

    // Bot√£o enviar WhatsApp
    
// ====== MFIT: buildMessageAll (100% da pesquisa + metabolismo) ======
function buildMessageAll() {
  const form = document.getElementById("mfitForm") || document;
  const lines = [];
  lines.push("üìù Formul√°rio MFIT ‚Äì C√≥pia Completa");
  lines.push("===============================================");

  const fields = form.querySelectorAll("input, select, textarea");
  fields.forEach(el => {
    let labelTxt = "";
    if (el.id) {
      const lab = form.querySelector('label[for="'+el.id+'"]');
      if (lab) labelTxt = (lab.textContent || "").replace(/\s+/g, " ").trim();
    }
    if (!labelTxt) labelTxt = el.getAttribute("placeholder") || el.getAttribute("name") || "(campo)";

    let val = "";
    const tag = el.tagName.toLowerCase();
    if (el.type === "radio" || el.type === "checkbox") {
      if (el.checked) val = (el.value || "").trim();
      else return;
    } else if (tag === "select" || tag === "textarea" || tag === "input") {
      val = (el.value || "").trim();
    }

    labelTxt = labelTxt.replace(/\s+/g, " ").trim();
    if (!labelTxt) labelTxt = "(campo)";
    if (!val) val = "‚Äî";
    lines.push(labelTxt + ": " + val);
  });

  let metab = "‚Äî";
  try { metab = (typeof mfit_classificar_metabolismo === "function") ? mfit_classificar_metabolismo() : "‚Äî"; } catch(e) {}
  lines.push("-----------------------------------------------");
  lines.push("‚û°Ô∏è Resultado autom√°tico do metabolismo: " + metab);
  return lines.join("\n");
}

    document.getElementById("sendBtn").addEventListener("click", () => {
      const nome = $("nome")?.value?.trim() || "";
      const zapAluno = normalizePhone($("zap")?.value || "");
      if(!nome || zapAluno.length < 10){
        $("err").style.display = "block"; $("ok").style.display = "none"; return;
      }

      $("err").style.display = "none";
      save();

      const full = buildMessage();

      const deep = "whatsapp://send?phone=" + phone + "&text=" + encodeURIComponent(full);
      const url  = "https://wa.me/" + phone + "?text=" + encodeURIComponent(full);
      try{
        window.location.href = deep;
        setTimeout(function(){ if(!document.hidden){ window.location.href = url; }}, 600);
      }catch(e){
        window.location.href = url;
      }

      $("ok").style.display = "block";
    });
  
    // ====== MFIT: Copiar tudo (com fallbacks e notifica√ß√µes) ======
    (function(){
      const btn = document.getElementById("copyAllBtn");
      if(!btn) return;
      btn.addEventListener("click", async () => {
        try { if (typeof save === "function") save(); } catch(e) {}
        const text = (typeof buildMessageAll === "function") ? buildMessageAll() : "";
        if(!text){ alert("N√£o foi poss√≠vel montar o texto da pesquisa. Preencha o formul√°rio e tente novamente."); return; }

        try {
          await navigator.clipboard.writeText(text);
          alert("‚úÖ Pesquisa completa copiada! Agora √© s√≥ colar onde quiser.");
          return;
        } catch(e) {}

        try {
          const ta = document.getElementById("copyAllHidden");
          ta.value = text;
          ta.focus(); ta.select();
          const ok = document.execCommand("copy");
          if (ok) { alert("‚úÖ Pesquisa completa copiada! Agora √© s√≥ colar onde quiser."); return; }
        } catch(e) {}

        try {
          const ta2 = document.getElementById("copyAllHidden");
          ta2.value = text;
          ta2.style.position = "fixed";
          ta2.style.left = "8px"; ta2.style.right = "8px"; ta2.style.bottom = "12px";
          ta2.style.width = "calc(100% - 16px)"; ta2.style.height = "180px";
          ta2.style.opacity = "1"; ta2.style.background = "#0e0e0e"; ta2.style.color = "#eaeaea";
          ta2.style.border = "1px solid #2a2a2a"; ta2.style.padding = "10px"; ta2.style.zIndex = "9999";
          ta2.focus(); ta2.select();
          alert("üìã O TEXTO INTEIRO foi SELECIONADO automaticamente. Toque em 'Copiar' e depois cole onde quiser. Toque em OK para esconder.");
          ta2.style.position = "absolute"; ta2.style.left = "-9999px"; ta2.style.top = "-9999px";
          ta2.style.width = "0"; ta2.style.height = "0"; ta2.style.opacity = "0";
        } catch(e) {
          alert("N√£o foi poss√≠vel copiar automaticamente. Selecione e copie manualmente.");
        }
      });
    })();
    
</script>

<script>
(function(){
  const KEY = "mfit_logo_custom";
  const img = document.querySelector(".logo img");
  const input = document.getElementById("logoInput");
  const clear = document.getElementById("clearLogo");

  function load(){
    const data = localStorage.getItem(KEY);
    if(data && img){ img.src = data; }
  }
  function save(file){
    const r = new FileReader();
    r.onload = e => {
      localStorage.setItem(KEY, e.target.result);
      if(img) img.src = e.target.result;
    };
    r.readAsDataURL(file);
  }
  if(input){
    input.addEventListener("change", e=>{
      const f = e.target.files && e.target.files[0];
      if(f) save(f);
    });
  }
  if(clear){
    clear.addEventListener("click", ()=>{
      localStorage.removeItem(KEY);
      location.reload();
    });
  }
  load();
})();
</script>
</body>

</html>
