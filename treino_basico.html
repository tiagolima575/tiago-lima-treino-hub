<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <title>Treino Iniciante ‚Äì Avalia√ß√£o Inicial | MFit Personal</title>
  <style>
    :root{--green:#29ff47;--bg:#0a0a0a;--panel:#111;--muted:#9a9a9a;--danger:#ff4d4d;}
    html,body{margin:0;padding:0;background:var(--bg);color:#eaeaea;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,'Helvetica Neue',Arial;}
    .wrap{max-width:820px;margin:0 auto;padding:16px;}
    .card{background:var(--panel);border:1px solid #1e1e1e;border-radius:16px;padding:16px;box-shadow:0 8px 28px rgba(0,0,0,.35);}
    .logo{display:flex;align-items:center;justify-content:center;margin:8px 0 16px;}
    .logo img{max-width:260px;height:auto;filter:drop-shadow(0 4px 16px rgba(41,255,71,.25));}
    h1{margin:8px 0 8px;font-size:1.35rem;color:var(--green);text-align:center;letter-spacing:.5px}
    .subtitle{margin:0 0 10px;text-align:center;color:#c9c9c9;font-size:.95rem}
    .section{margin:18px 0;padding:14px;border:1px solid #1f1f1f;border-radius:14px;background:#0e0e0e}
    .section-title{margin:0 0 6px;color:#fff;font-weight:700;font-size:1rem;background:linear-gradient(90deg, rgba(41,255,71,.15), transparent);padding:8px 10px;border-radius:10px}
    label.q{display:block;color:#fff;font-weight:600;margin:12px 0 6px}
    .hint{color:var(--muted);font-size:.88rem;margin:-2px 0 8px}
    input[type=text], input[type=number], textarea, select{
      width:100%;padding:12px 14px;border-radius:12px;border:1px solid #1e1e1e;background:#141414;color:#eee;
      outline:none;transition:.2s;
    }
    textarea{min-height:84px;resize:vertical}
    input:focus, textarea:focus, select:focus{border-color:var(--green);box-shadow:0 0 0 3px rgba(41,255,71,.12)}
    .row{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    @media (max-width:560px){.row{grid-template-columns:1fr} .logo img{max-width:200px}}
    .btn{margin-top:12px;width:100%;background:var(--green);color:#091109;border:none;border-radius:14px;padding:14px 16px;font-weight:800;font-size:1.05rem;box-shadow:0 10px 30px rgba(41,255,71,.22);cursor:pointer;}
    .btn:active{transform:translateY(1px)}
    .btn.secondary{background:#1a1a1a;color:#eaeaea;border:1px solid #2a2a2a;box-shadow:none}

    .error{color:var(--danger);font-size:.9rem;margin-top:6px;display:none}
    .success{display:none;color:#b6f5c1;background:#0f1f12;border:1px solid #203b21;padding:10px;border-radius:10px;margin-top:10px}
    .copy{margin-top:10px;display:none;text-align:center}
    .copy button{background:#222;border:1px solid #333;color:#eee;border-radius:10px;padding:10px 12px;cursor:pointer}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="logo">
      <img id="brandLogo" src="logo-tiago.png" alt="Logo Tiago Lima"/>
    </div>

    <h1>Treino Iniciante ‚Äì Avalia√ß√£o Inicial</h1>
    <p class="subtitle">Preencha com aten√ß√£o suas informa√ß√µes para que o Personal elabore seu treino de forma personalizada.</p>

    <form id="mfitTB" class="card" onsubmit="return false;">
      <div class="section">
        <div class="section-title">Se√ß√£o 1 ‚Äì Dados Pessoais</div>
        <label class="q" for="nome">1. Nome completo</label>
        <div class="hint">(resposta curta)</div>
        <input id="nome" name="nome" type="text" placeholder="Ex.: Ana Souza" required>
        <div class="row">
          <div>
            <label class="q" for="idade">2. Idade</label>
            <input id="idade" name="idade" type="number" inputmode="numeric" min="0" max="120" placeholder="Ex.: 28">
          </div>
          <div>
            <label class="q" for="zap">3. WhatsApp</label>
            <input id="zap" name="zap" type="text" inputmode="tel" placeholder="Ex.: (69) 99291-3628">
          </div>
        </div>
      </div>

      <div class="section">
        <div class="section-title">Se√ß√£o 2 ‚Äì Objetivo e Frequ√™ncia</div>
        <label class="q" for="objetivo">4. Qual √© o seu principal objetivo com o treino?</label>
        <div class="hint">(m√∫ltipla escolha)</div>
        <select id="objetivo" name="objetivo">
          <option value="" selected>Selecione...</option>
          <option>Ganhar massa muscular</option>
          <option>Perder peso</option>
          <option>Melhorar sa√∫de e disposi√ß√£o</option>
          <option>Defini√ß√£o corporal</option>
          <option>Outro (especifique abaixo)</option>
        </select>
        <textarea id="objetivoOutro" name="objetivoOutro" placeholder="Se marcou 'Outro', descreva aqui"></textarea>

        <label class="q" for="dias">5. Quantos dias por semana voc√™ pretende treinar?</label>
        <input id="dias" name="dias" type="text" placeholder="Ex.: 3 dias/semana">
      </div>

      <div class="section">
        <div class="section-title">Se√ß√£o 3 ‚Äì Condi√ß√£o F√≠sica e Limita√ß√µes</div>
        <label class="q" for="temLesao">6. Voc√™ possui alguma dor, les√£o ou limita√ß√£o f√≠sica?</label>
        <select id="temLesao" name="temLesao">
          <option value="" selected>Selecione...</option>
          <option>Sim</option>
          <option>N√£o</option>
        </select>

        <label class="q" for="ondeLesao">7. Onde √© a limita√ß√£o ou dor?</label>
        <div class="hint">Ex.: joelho, ombro, coluna, tornozelo etc.</div>
        <input id="ondeLesao" name="ondeLesao" type="text" placeholder="Descreva o local">

        <label class="q" for="movDor">8. Algum movimento ou exerc√≠cio causa desconforto?</label>
        <textarea id="movDor" name="movDor" placeholder="Descreva o movimento/exerc√≠cio"></textarea>
      </div>

      <div class="section">
        <div class="section-title">Se√ß√£o 4 ‚Äì Hist√≥rico e Situa√ß√µes Espec√≠ficas</div>
        <label class="q" for="cesarea">9. Voc√™ fez parto ces√°rea?</label>
        <select id="cesarea" name="cesarea">
          <option value="" selected>Selecione...</option>
          <option>Sim</option>
          <option>N√£o</option>
        </select>
        <label class="q" for="cesareaTempo">10. Se sim, h√° quanto tempo foi o parto?</label>
        <input id="cesareaTempo" name="cesareaTempo" type="text" placeholder="Ex.: 8 meses, 2 anos">
      </div>

      <div class="section">
        <div class="section-title">Se√ß√£o 5 ‚Äì Local de Treino</div>
        <label class="q" for="local">11. Onde voc√™ treina?</label>
        <select id="local" name="local">
          <option value="" selected>Selecione...</option>
          <option>Academia</option>
          <option>Casa com equipamentos</option>
          <option>Casa sem equipamentos</option>
        </select>
      </div>

      <div class="section">
        <div class="section-title">Se√ß√£o 6 ‚Äì Observa√ß√µes Finais</div>
        <label class="q" for="obs">12. Deseja adicionar alguma observa√ß√£o ou prefer√™ncia?</label>
        <textarea id="obs" name="obs" placeholder="Prefer√™ncias de treino, hor√°rios, restri√ß√µes, etc."></textarea>
      </div>

      <div class="section" id="secMetabolismo">
        <div class="section-title">üß¨ Se√ß√£o 7 ‚Äì Tipo de Metabolismo</div>
        <p class="hint">Responda rapidamente para identificarmos seu tipo metab√≥lico:</p>

        <label class="q" for="met1">1. Voc√™ ganha peso com facilidade ou dificuldade?</label>
        <select id="met1" name="met1">
          <option value="" selected>Selecione...</option>
          <option>Com facilidade</option>
          <option>Com dificuldade</option>
          <option>Normal</option>
        </select>

        <label class="q" for="met2">2. Seu corpo tende a ser mais magro, m√©dio ou largo?</label>
        <select id="met2" name="met2">
          <option value="" selected>Selecione...</option>
          <option>Mais magro</option>
          <option>M√©dio</option>
          <option>Mais largo</option>
        </select>

        <label class="q" for="met3">3. Tem facilidade para perder peso?</label>
        <select id="met3" name="met3">
          <option value="" selected>Selecione...</option>
          <option>Sim</option>
          <option>N√£o</option>
          <option>Mais ou menos</option>
        </select>

        <label class="q" for="met4">4. Como √© seu apetite?</label>
        <select id="met4" name="met4">
          <option value="" selected>Selecione...</option>
          <option>Baixo</option>
          <option>Moderado</option>
          <option>Alto</option>
        </select>

        <label class="q" for="met5">5. Como √© sua energia ao longo do dia?</label>
        <select id="met5" name="met5">
          <option value="" selected>Selecione...</option>
          <option>Alta o tempo todo</option>
          <option>Regular</option>
          <option>Baixa com frequ√™ncia</option>
        </select>

        <p style="margin-top:12px;color:#9a9a9a;font-size:.9rem;">
          ‚û§ <strong>Resultado autom√°tico:</strong> Seu metabolismo √©
          <span id="metResultado" style="color:#29ff47;font-weight:600;">‚Äî</span>.
        </p>
      </div>

      <button id="sendBtn" class="btn" type="button">üì≤ Enviar respostas para o Personal no WhatsApp</button>
      <button id="copyAllBtn" class="btn secondary" type="button">üìã Copiar todas as respostas</button>

      <div id="err" class="error">Preencha pelo menos o nome e um WhatsApp v√°lido.</div>
      <div id="ok" class="success">Abrindo o WhatsApp... Se n√£o abrir, a mensagem j√° ficou copiada para voc√™ colar.</div>

      <div class="copy" id="copyBox">
        <button id="copyBtn" type="button">Copiar mensagem (fallback)</button>
      </div>

      <textarea id="copyAllHidden" style="position:absolute;left:-9999px;top:-9999px;height:0;width:0;opacity:0;"></textarea>
    </form>
  </div>

  <script>
    // Logo automatico (sem botoes):
    // 1) Tenta carregar logo salvo no localStorage (mfit_brand_logo_dataurl)
    // 2) Tenta carregar logo-tiago.png (mesma pasta do HTML)
    // 3) Se falhar, cai no banner padrao (SVG).
    const MFIT_FALLBACK_LOGO = `data:image/svg+xml;utf8,
        <svg xmlns='http://www.w3.org/2000/svg' width='720' height='220' viewBox='0 0 720 220'>
          <rect width='100%' height='100%' fill='black'/>
          <g fill='%2329ff47'>
            <text x='50%' y='50%' dominant-baseline='middle' text-anchor='middle' font-size='40' font-family='Arial' font-weight='700'>TREINO INICIANTE</text>
            <text x='50%' y='78%' dominant-baseline='middle' text-anchor='middle' font-size='18' font-family='Arial'>Avaliacao Inicial</text>
          </g>
        </svg>`;

    function mfit_init_logo(){
      const img = document.getElementById('brandLogo');
      if(!img) return;
      const saved = localStorage.getItem('mfit_brand_logo_dataurl');
      if(saved && saved.startsWith('data:image')){
        img.src = saved;
        return;
      }
      img.onerror = () => { img.onerror = null; img.src = MFIT_FALLBACK_LOGO; };
      img.src = 'logo-tiago.png';
    }

    if(document.readyState==='complete' || document.readyState==='interactive'){
      setTimeout(() => { mfit_init_logo(); }, 0);
    } else {
      document.addEventListener('DOMContentLoaded', () => { mfit_init_logo(); });
    }
  </script>

<script>
    const phone = "5569992913628";
    const $ = (id) => document.getElementById(id);
    const normalizePhone = v => (v||"").replace(/\D+/g,'');

    const fields = [
      "nome","idade","zap","objetivo","objetivoOutro","dias",
      "temLesao","ondeLesao","movDor","cesarea","cesareaTempo","local","obs",
      "met1","met2","met3","met4","met5"
    ];

    function save(){
      const d={};
      fields.forEach(f=>{ const el=$(f); if(el){ d[f]=el.value; }});
      localStorage.setItem("mfit_treino_iniciante_modelo", JSON.stringify(d));
    }
    function load(){
      try{
        const d=JSON.parse(localStorage.getItem("mfit_treino_iniciante_modelo")||"{}");
        fields.forEach(f=>{ const el=$(f); if(el && d[f]!==undefined){ el.value=d[f]; }});
      }catch(e){}
    }
    load();
    fields.forEach(f=>{
      const el=$(f);
      if(el){ el.addEventListener("input", save); el.addEventListener("change", save); }
    });

    function buildMessageCompact(){
      const objetivoSel = $("objetivo").value || "";
      const objetivoOutro = ($("objetivoOutro").value||"").trim();
      const objetivo = (objetivoSel === "Outro (especifique abaixo)" && objetivoOutro) ? objetivoOutro : objetivoSel;

      const data = {
        "Nome": ($("nome").value||"").trim(),
        "Idade": ($("idade").value||"").trim(),
        "WhatsApp do aluno": ($("zap").value||"").trim(),
        "Objetivo": objetivo,
        "Dias/semana": ($("dias").value||"").trim(),
        "Tem dor/les√£o/limita√ß√£o?": ($("temLesao").value||"").trim(),
        "Local da dor/les√£o": ($("ondeLesao").value||"").trim(),
        "Movimento com desconforto": ($("movDor").value||"").trim(),
        "Fez parto ces√°rea?": ($("cesarea").value||"").trim(),
        "Tempo desde o parto": ($("cesareaTempo").value||"").trim(),
        "Local de treino": ($("local").value||"").trim(),
        "Observa√ß√µes": ($("obs").value||"").trim()
      };

      const lines = ["Ol√°! Seguem minhas respostas do formul√°rio *Treino Iniciante ‚Äì Avalia√ß√£o Inicial*:"];
      for(const [k,v] of Object.entries(data)){ if(v) lines.push(k + ": " + v); }
      const metab = (typeof mfit_classificar_metabolismo==="function") ? mfit_classificar_metabolismo() : "‚Äî";
      lines.push("Resultado: Seu metabolismo √© " + metab + ".");
      return lines.join("\n");
    }

    function buildMessageAll(){
      const form = document.getElementById("mfitTB");
      const lines = [];
      lines.push("üìù Formul√°rio MFIT ‚Äì C√≥pia Completa");
      lines.push("===============================================");

      const elements = form.querySelectorAll("input, select, textarea");
      elements.forEach(el => {
        if(el.id === "copyAllHidden") return;

        const tag = el.tagName.toLowerCase();
        if(tag === "button") return;
        if(tag === "input" && (el.type === "button" || el.type === "submit")) return;

        let labelTxt = "";
        if (el.id) {
          const lab = form.querySelector('label[for="'+el.id+'"]');
          if (lab) labelTxt = (lab.textContent || "").replace(/\s+/g, " ").trim();
        }
        if (!labelTxt) labelTxt = el.getAttribute("name") || "(campo)";

        let val = "";
        if (el.type === "radio" || el.type === "checkbox") {
          if (!el.checked) return;
          val = (el.value || "").trim();
        } else {
          val = (el.value || "").trim();
        }
        if (!val) val = "‚Äî";
        lines.push(labelTxt + ": " + val);
      });

      let metab = "‚Äî";
      try{
        metab = (typeof mfit_classificar_metabolismo === "function") ? mfit_classificar_metabolismo() : "‚Äî";
      }catch(e){}

      lines.push("-----------------------------------------------");
      lines.push("‚û°Ô∏è Resultado autom√°tico do metabolismo: " + metab);
      return lines.join("\n");
    }

    async function copyTextRobust(text){
      try{
        await navigator.clipboard.writeText(text);
        return true;
      }catch(e){}
      try{
        const ta = document.getElementById("copyAllHidden");
        ta.value = text;
        ta.focus(); ta.select();
        return !!document.execCommand("copy");
      }catch(e){}
      return false;
    }

    function sendToWhatsApp(text){
      const deepLink = "whatsapp://send?phone=" + phone + "&text=" + encodeURIComponent(text);
      const webLink  = "https://wa.me/" + phone + "?text=" + encodeURIComponent(text);

      try{
        window.location.href = deepLink;
        setTimeout(function(){
          if(!document.hidden){
            window.location.href = webLink;
          }
        }, 650);
      }catch(e){
        window.location.href = webLink;
      }
    }

    document.getElementById("sendBtn").addEventListener("click", async () => {
      const nome = ($("nome").value||"").trim();
      const zapAluno = normalizePhone($("zap").value);

      if(!nome || zapAluno.length < 10){
        $("err").style.display = "block";
        $("ok").style.display = "none";
        return;
      }

      $("err").style.display = "none";
      save();

      const text = buildMessageCompact();

      const copied = await copyTextRobust(text);
      if(!copied){
        document.getElementById("copyBox").style.display = "block";
        document.getElementById("copyBtn").onclick = async () => {
          const ok = await copyTextRobust(text);
          alert(ok ? "‚úÖ Mensagem copiada! Abra o WhatsApp e cole." : "N√£o foi poss√≠vel copiar automaticamente. Copie manualmente.");
        };
      }

      $("ok").style.display = "block";
      sendToWhatsApp(text);
    });

    document.getElementById("copyAllBtn").addEventListener("click", async () => {
      save();
      const text = buildMessageAll();
      const ok = await copyTextRobust(text);
      alert(ok ? "‚úÖ Pesquisa completa copiada! Agora √© s√≥ colar onde quiser." : "N√£o foi poss√≠vel copiar automaticamente. Copie manualmente.");
    });
  </script>

  <script>
    (function(){
      function val(id){ var el=document.getElementById(id); return el?el.value:""; }
      function attach(){
        ["met1","met2","met3","met4","met5"].forEach(function(id){
          var el=document.getElementById(id);
          if(el && !el.__mfitBound){
            el.addEventListener("change", mfit_classificar_metabolismo);
            el.__mfitBound = true;
          }
        });
      }
      window.mfit_classificar_metabolismo = function(){
        var v1=val("met1"), v2=val("met2"), v3=val("met3"), v4=val("met4"), v5=val("met5");
        var ecto=0, meso=0, endo=0;
        if(v1==="Com dificuldade") ecto++;
        if(v1==="Com facilidade") endo++;
        if(v2==="Mais magro") ecto++;
        if(v2==="M√©dio") meso++;
        if(v2==="Mais largo") endo++;
        if(v3==="Sim") ecto++;
        if(v3==="N√£o") endo++;
        if(v4==="Baixo") ecto++;
        if(v4==="Alto") endo++;
        if(v5==="Alta o tempo todo") ecto++;
        if(v5==="Baixa com frequ√™ncia") endo++;
        if(v5==="Regular") meso++;
        var res = (ecto>meso && ecto>endo) ? "Ectomorfo" :
                  (endo>meso && endo>ecto) ? "Endomorfo" :
                  "Mesomorfo";
        var spot=document.getElementById("metResultado");
        if(spot){ spot.textContent = res; }
        return res;
      };
      function init(){
        attach();
        try { mfit_classificar_metabolismo(); } catch(e){}
      }
      if(document.readyState==="complete" || document.readyState==="interactive"){
        setTimeout(init, 0);
      }else{
        document.addEventListener("DOMContentLoaded", init);
      }
    })();
  </script>
</body>
</html>
